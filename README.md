# Time Consistent Surface Mapping for Deformable Object Shape Control

This repository contains the MATLAB code for replicating the surface mapping results presented in our paper:

> **[1]** I. Cuiral-Zueco and G. L칩pez-Nicol치s, *"Time Consistent Surface Mapping for Deformable Object Shape Control,"* IEEE Transactions on Automation Science and Engineering, doi: [10.1109/TASE.2025.3529180](https://doi.org/10.1109/TASE.2025.3529180).

---
## Disclaimer

The `.mat` data files in this repository are stored using Git LFS. To properly access the data, **clone** the repository using:

`git clone https://github.com/nachocz/time-consistent-surface-mapping`

**Do not** download the repository as a ZIP, as this will not generate proper `.mat` files.

---

## Overview

This code demonstrates the implementation of **time-consistent surface mapping** for deformable objects, a technique aimed at achieving accurate and efficient shape control. The repository includes scripts to reproduce experimental results, including:
- **Surface maps**: Visualization of the deformation mapping process.
- **Shape error analysis**: Quantitative comparison of shape errors.
- **Time cost analysis**: Evaluates performance, which may vary depending on your system's specifications.
- **Mesh size evaluation**: Examination of the generated meshes.

Example plots generated by the script `timeconsistentsurfacemapping.m` include surface maps, shape error graphs, time cost comparisons, and mesh size plots:

![Surface Mapping Results](https://github.com/user-attachments/assets/98a36d80-3099-46ab-824e-54306151167e)

---

## Repository contents

The repository includes:

- **`data/`**: Contains experiment videos and mesh data for analysis.
  - `.mp4` files: Videos of the shape control experiments.
  - `.mat` files: Mesh data generated from colour-segmented (CieLAB space) RGB-D frames in the experiments.
  
- **`utils/`**: Utilities for mesh analysis, obtained from [https://github.com/llorz/SGA19_zoomOut](https://github.com/llorz/SGA19_zoomOut).
  
- **`timeconsistentsurfacemapping.m`**: Main script to replicate the surface mapping results presented in the paper.
  
- **`objectsurfacemeshing.m`**: Script illustrating the conversion of raw point cloud data into the mesh structures stored in the `data` folder.
---

## Dependencies

To run the scripts, you need MATLAB installed with the following toolboxes:
- **Statistics and Machine Learning Toolbox**
- **Computer Vision Toolbox**
- **Lidar Toolbox**
- **Optimization Toolbox**

---

## Features and capabilities

The code provides the following functionalities:
1. **Time-Consistent Surface Mapping**: Implements a method to achieve consistent deformation mapping over time for deformable objects.
2. **Performance Comparison**: Benchmarks the proposed method against a classical ZoomOut approach.
3. **Error and Time Analysis**: Evaluates shape errors and computational time for each experiment.
4. **Visualization**: Generates plots for surface mapping, shape errors, time cost, and mesh sizes.

---

## Experiment data

The `data` folder contains experiment data for five different deformable objects:
1. **Mexican hat**
2. **T-shaped noodle**
3. **Pillow**
4. **Foam rectangle**
5. **Foam free-shape** (custom foam cutout)

Each `.mat` file in the `data` folder corresponds to the RGB-D mesh data for one of these objects, enabling reproduction of the surface mapping results.


---

## Experimental setup

The experiments were conducted using a robotic setup designed for the shape control of deformable objects. The mesh data provided in the `data` folder was obtained using an RGB-D RealSense camera. The process of converting raw point cloud data into mesh structures is illustrated in the `objectsurfacemeshing.m` script.

Below is an image of the robotic setup used in the experiments:

![Robotic Setup](https://github.com/user-attachments/assets/f41b79fe-97c9-454b-b08e-2671eb367adb)

## Citation

If you use this code in your research, please cite the original paper:

> **[1]** I. Cuiral-Zueco and G. L칩pez-Nicol치s, *"Time Consistent Surface Mapping for Deformable Object Shape Control,"* IEEE Transactions on Automation Science and Engineering, doi: [10.1109/TASE.2025.3529180](https://doi.org/10.1109/TASE.2025.3529180).
